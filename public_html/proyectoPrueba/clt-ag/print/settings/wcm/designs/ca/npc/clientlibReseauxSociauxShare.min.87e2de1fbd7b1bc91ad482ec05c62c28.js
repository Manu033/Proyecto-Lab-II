var regex=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/;
function checkEmailMulti(element){var email=$(element).val();if($.trim(email).length!==0){var validate;var emailTab=email.split(",");if(emailTab.length>4)validate=false;else for(var i=0;i<emailTab.length;i++){var result=regex.test($.trim(emailTab[i]));if(!result){validate=false;break}else validate=true}if(!validate){$(element).attr("aria-invalid","true");$(element).addClass("Modal-emailError")}else{$(element).attr("aria-invalid","false");$(element).removeClass("Modal-emailError")}}else{$(element).attr("aria-invalid","true");
$(element).addClass("Modal-emailError")}}function checkInputRequired(element){if($(element).val().trim()===""){$(element).attr("aria-invalid","true");$(element).addClass("Modal-emailError")}else{$(element).attr("aria-invalid","false");$(element).removeClass("Modal-emailError")}}
$(document).ready(function(){var ajaxEnCours=false;var errorZone=$(".ShareMail-error");var _getCaptcha=function(){return $(".modalMagReseauSociaux").find("[data-npc-captcha]")};var _refreshCaptcha=function(callback){var magReseauxSociauxCaptchaElement=_getCaptcha();magReseauxSociauxCaptchaElement.npcCaptcha("refresh",callback)};var displayError=function(error){errorZone.html(error);errorZone.show()};var clearError=function(){errorZone.html("");errorZone.hide()};var _displaySendMailError=function(msg){if(msg.echecsList)displayError(msg.echecsList);
else displayError("Une erreur inconnue est survenue lors de l'envoi du mail !")};var _changeSubmitBtnState=function(state){ajaxEnCours=state;$(".js-ShareMail-submit").prop("disabled",state)};var validationFormulaire=function(e){clearError();e.preventDefault();var magReseauxSociauxCaptcha=_getCaptcha();if(magReseauxSociauxCaptcha.length===0){console.error("Captcha not found !");return}var contact="#contact1MagReseauxSociaux";var lastname="#lastnameMagReseauxSociaux";var firstname="#firstnameMagReseauxSociaux";
var captchaValue=magReseauxSociauxCaptcha.npcCaptcha("getResponse");checkEmailMulti(contact);checkInputRequired(lastname);checkInputRequired(firstname);if($(contact).hasClass("Modal-emailError")||$(lastname).hasClass("Modal-inputRequired")||$(firstname).hasClass("Modal-inputRequired")){e.preventDefault();_refreshCaptcha();return false}if(!ajaxEnCours){_changeSubmitBtnState(true);var nomUtilisateur=$(lastname).val();var prenomUtilisateur=$(firstname).val();var emailDestinataire=$(contact).val();var titre=
$("#titre").val();$.ajax({type:"POST",url:globalMagReseauxSociaux_relativePath,data:"nomUtilisateur\x3d"+nomUtilisateur+"\x26prenomUtilisateur\x3d"+prenomUtilisateur+"\x26emailDestinataire\x3d"+emailDestinataire+"\x26captchaId\x3d"+magReseauxSociauxCaptcha.npcCaptcha("getId")+"\x26captchaResponse\x3d"+captchaValue+"\x26titre\x3d"+titre,success:function(msg){if(msg.isSend===true){voirModalMessage();$(".js-ShareMail-submit").prop("disabled",false)}else _displaySendMailError(msg);_changeSubmitBtnState(false);
_refreshCaptcha()},error:function(){_displaySendMailError("Une erreur inconnue est survenue !");_changeSubmitBtnState(false);_refreshCaptcha()}})}return false};$(".js-ShareMail").submit(function(e){e.preventDefault();var magReseauxSociauxCaptcha=_getCaptcha();if(magReseauxSociauxCaptcha.length!==0)magReseauxSociauxCaptcha.npcCaptcha("validate",function(){validationFormulaire(e)});else validationFormulaire(e)});$(".js-ShareMailModalDisplay").on("click",function(){_refreshCaptcha(function(){$("#shareMailModal").modal("show")})});
$("#shareMailModal").on("hidden.bs.modal",function(){resetModal()});$("#closePopinSendMail").on("click",function(){var magReseauxSociauxCaptcha=_getCaptcha();if(magReseauxSociauxCaptcha.length!==0)magReseauxSociauxCaptcha.npcCaptcha("hideErrors")})});function voirModalMessage(){$(".js-ShareMail").addClass("hidden");$(".js-ShareMail-legalNotice").addClass("hidden");$(".js-ShareMail-sendInformationsSuccessful").removeClass("hidden")}
function resetModal(){$(".js-ShareMail").removeClass("hidden");$(".js-ShareMail-legalNotice").removeClass("hidden");$(".js-ShareMail-sendInformationsSuccessful").addClass("hidden");$(".js-ShareMail-submit").prop("disabled",false);ajaxEnCours=false;$(".fieldFormSendByMail").each(function(){$(this).val("");$(this).attr("aria-invalid","false");$(this).removeClass("Modal-emailError");$(this).removeClass("Modal-inputRequired")})}
function onFocus(){var offset;if(document.body.classList.contains("modal--opened")){offset=parseInt(document.body.style.top,10);document.body.classList.remove("modal--opened");document.body.scrollTop=offset*-1}else{offset=document.body.scrollTop;document.body.style.top=offset*-1+"px";document.body.classList.add("modal--opened")}}var NPC=NPC||{};
$(document).on("ready",function(){var isSNallowed=document.cookie.replace(/(?:(?:^|.*;\s*)isSNallowed\s*=\s*([^;]*).*$)|^.*$/,"$1");if(isSNallowed==="true"){globalMagReseauxSociaux_currentPagePath=window.location.href;if(typeof globalMagReseauxSociaux_titlePage!="undefined"){$("#id_rs_twitter").prop("href","https://twitter.com/intent/tweet?text\x3d"+globalMagReseauxSociaux_titlePage+"%20"+encodeURIComponent(globalMagReseauxSociaux_currentPagePath));$("#id_rs_linkedin").prop("href","https://www.linkedin.com/shareArticle?mini\x3dtrue\x26url\x3d"+
encodeURIComponent(globalMagReseauxSociaux_currentPagePath)+"\x26title\x3d"+globalMagReseauxSociaux_titlePage);$("#id_rs_linkedin").prop("target","_blank")}$("#id_rs_facebook").on("click",function(e){e.preventDefault();postfb()})}});
if(typeof NPC.facebookApiKey!=="undefined"){var isSNallowed=document.cookie.replace(/(?:(?:^|.*;\s*)isSNallowed\s*=\s*([^;]*).*$)|^.*$/,"$1");if(isSNallowed==="true"){window.fbAsyncInit=function(){FB.init({appId:NPC.facebookApiKey,xfbml:true,version:"v2.9"});FB.AppEvents.logPageView()};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/fr_FR/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script",
"facebook-jssdk")}}function postfb(){if(typeof NPC.facebookApiKey!=="undefined")FB.ui({method:"share",href:globalMagReseauxSociaux_currentPagePath},function(response){})};