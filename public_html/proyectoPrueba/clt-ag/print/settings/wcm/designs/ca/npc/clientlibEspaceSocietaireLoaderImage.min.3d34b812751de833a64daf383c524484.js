(function(document,$,Granite,$document){var INITIATIVE_ITEM_CLASS=".initiativesItemPagination";var URL_IMAGE_DEFAULT="/content/dam/assetsca/npc/logos/CA_Toute-une-banque-pour-vous_V.svg";function loadImageInitiatives(url,$loaderImage,$baliseImg){$.ajax({type:"GET",url:url,beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset\x3dx-user-defined")},success:function(result,textStatus,jqXHR){var binary="";var responseText=jqXHR.responseText;var responseTextLen=responseText.length;for(var i=
0;i<responseTextLen;i++)binary+=String.fromCharCode(responseText.charCodeAt(i)&255);$loaderImage.hide();$baliseImg.attr("src","data:image/png;base64,"+btoa(binary)).show()},error:function(){$loaderImage.hide();$baliseImg.attr("src",URL_IMAGE_DEFAULT).show()}})}function loadImagePushInitiatives(url,$loaderImage,$baliseImg){$.ajax({type:"GET",url:url,beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset\x3dx-user-defined")},success:function(result,textStatus,jqXHR){var binary="";var responseText=
jqXHR.responseText;var responseTextLen=responseText.length;for(var i=0;i<responseTextLen;i++)binary+=String.fromCharCode(responseText.charCodeAt(i)&255);$loaderImage.hide();$baliseImg.attr("style","background-image: url('data:image/png;base64,"+btoa(binary)+"')")},error:function(){$loaderImage.hide();$baliseImg.attr("style","background-image: url('"+URL_IMAGE_DEFAULT+"')")}})}$(document).ready(function(){var loadImages=function(el){var $divImage=$(el).find(".ES-card-imageWrapper");var urlImage=$divImage.find("input.hidden").val();
var $loaderImage=$divImage.find("div.loader");var $baliseImg=$divImage.find("img");if(urlImage!="")loadImageInitiatives(urlImage,$loaderImage,$baliseImg);else{$loaderImage.hide();$baliseImg.attr("src",URL_IMAGE_DEFAULT).show()}};var vignettes=$(document).find(INITIATIVE_ITEM_CLASS);vignettes.each(function(index,el){var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutationRecord){if(mutationRecord.target.style.display!="none")loadImages(el)})});observer.observe(el,{attributes:true,
attributeFilter:["style"]})});vignettes.slice(0,6).each(function(el){loadImages(vignettes[el])});$(document).find(".ArticleBloc").each(function(index,el){var urlImage=$(el).find("input.hidden").val();var $loaderImage=$(el).find("div.loader");var $baliseImg=$(el).find("img.imageInitiative");if(urlImage!="")loadImageInitiatives(urlImage,$loaderImage,$baliseImg);else{$loaderImage.hide();$baliseImg.attr("src",URL_IMAGE_DEFAULT).show()}});$(document).find(".ES-actors").each(function(index,el){var urlImage=
$(el).find("input.hidden").val();var $loaderImage=$(el).find("div.loader");var $baliseImg=$(el).find("img.imageCaisse");if(urlImage!="")loadImageInitiatives(urlImage,$loaderImage,$baliseImg);else{$loaderImage.hide();$baliseImg.attr("src",URL_IMAGE_DEFAULT).show()}});$(document).find(".PushInitiatives-imageWrapper").each(function(index,el){var urlImage=$(el).find("input.hidden").val();var $loaderImage=$(el).find("div.loader");var $baliseImg=$(el).find("img.PushInitiatives-image");if(urlImage!="")loadImagePushInitiatives(urlImage,
$loaderImage,$(el));else{$loaderImage.hide();$(el).attr("style","background-image: url('"+URL_IMAGE_DEFAULT+"')")}})})})(document,Granite.$,Granite,jQuery(document));